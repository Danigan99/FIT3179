{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/Danigan99/FIT3179/main/DV2_Code/Stacked_Area_Chart/data/stacked_area_data.csv"
  },
  "vconcat": [
    {
      "width": 600,
      "height": 300,
      "title":{"text": "An interesting trend for punters, could be the increasing success of the orthodox stance",
      "fontSize": 18},
      "layer":[
        {
        "mark": "area",
        "encoding": {
          "x": {
            "field": "date",
            "timeUnit": "yearmonth",
            "scale": {"domain": {"param": "brush"}},
            "axis": {"title": "", "tickCount": 5, "grid": false}
          },
          "y": {"aggregate": "count", "title": "Number of Fights Won"},
          "color": {
            "field": "Winner",
            "scale": {
              "range": ["#171514", "#fdbe85", "#EE4420"]
            },
            "legend": {"values": ["Switch", "Southpaw", "Orthodox"]}
          },
          "tooltip": [ {"field": "Winner", "type": "nominal"}
        ]
        }
      },
      {
        "transform": [
          {"filter": "datum.Winner === 'Southpaw'"},
          {"aggregate": [{"op": "count", "as": "count"}]},
          {"calculate": "'Between 2010 and 2021, Southpaws have won: 791 fights'","as": "text_annotation_raw"}],
        "mark": "text",
        "encoding": {
          "text": {
            "field": "text_annotation_raw"
          }
        },
        "title": "Percentage of Winners Who Were Southpaw"
      }
    ]    
    },
    {
        "width": 600,
        "height": 60,
        "mark": "area",
        "title": "Use the line chart below to zoom in specific time periods",
        "params": [
            {
                "name": "brush",
                "select": 
                    {
                        "type": "interval",
                        "encodings": ["x"]    
                    }

            }
        ],
        "encoding": {
            "x": {"field": "date", "type": "temporal"},
            "y": {"aggregate": "count", "title": "Number of Fights Won"},
            "color": {
              "field": "Winner",
              "scale": {
                "range": ["#171514", "#fdbe85", "#EE4420"]
              }
            }
          }
        }
  ]
}